<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
<title>Backbone Test</title>
<script src="http://jashkenas.github.io/underscore/underscore-min.js"></script>
<script src="http://jashkenas.github.io/backbone/backbone-min.js"></script>
<script>

console.log('----------------------------');
// defining Backbone models
TimeEntry = Backbone.Model.extend({
    urlRoot: '/entry',
    defaults: {
        entry_date: new Date(),
        direction: '',
        last_changed: new Date()
    },
    initialize: function() {
        //        alert("Hi Schernoo");
    }
});

EntryList = Backbone.Collection.extend({
    model: TimeEntry,
    url: '/entry'
});


// initializing backbone models
var entry = new TimeEntry({id: '53181191ab15eb00000004cb'});
//var entry = new TimeEntry({id: '52ee8c4c5ba0e5e019053ea1'});

entry.fetch({
    success: function(e) {
        var direction = e.get('direction');
        if(direction == 'enter') {
            direction = 'go';
        } else {
            direction = 'enter';
        }
        
        e.set({direction: direction});
        
        //        e.save();
        
    },
    error: function(err) {
        alert("Error: " + err.toString());
    }
});

var entries = new EntryList();
entries.fetch({
    success: function(timeentries) {
        //        alert(timeentries.length);
        $('#xxx').val(timeentries.at(0).attributes.direction);
    },
    error: function(err) {
        alert("Error: " + err.toString());
    }
});

</script>
</head>
<body>
<input type="text", id="xxx", onchange="alert($('#xxx').val());" />
</body>
</html>